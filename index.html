<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DBMS Project Website</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            transition: background-color 0.5s ease, color 0.5s ease;
        }
        html {
             transition: background-color 0.5s ease, color 0.5s ease;
        }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        :root {
            --color-bg-primary: #f8fafc;
            --color-bg-secondary: #ffffff;
            --color-text-primary: #1e293b;
            --color-text-secondary: #475569;
            --color-text-tertiary: #64748b;
            --color-accent-main: #06b6d4;
            --color-accent-dark: #0891b2;
            --color-border: #e2e8f0;
            --color-process-flow-bg: #f1f5f9;
            --color-arrow: #94a3b8;
            --color-list-marker: #06b6d4;
        }

        html.dark {
            --color-bg-primary: #1a202c;
            --color-bg-secondary: #2d3748;
            --color-text-primary: #f1f5f9;
            --color-text-secondary: #a0aec0;
            --color-text-tertiary: #cbd5e0;
            --color-accent-main: #22d3ee;
            --color-accent-dark: #67e8f9;
            --color-border: #4a5568;
            --color-process-flow-bg: #4a5568;
            --color-arrow: #a0aec0;
            --color-list-marker: #22d3ee;
        }

        body {
            background-color: var(--color-bg-primary);
            color: var(--color-text-primary);
        }
        .text-primary { color: var(--color-text-primary); }
        .text-secondary { color: var(--color-text-secondary); }
        .text-tertiary { color: var(--color-text-tertiary); }
        .accent-main { color: var(--color-accent-main); }
        .accent-dark { color: var(--color-accent-dark); }
        .bg-secondary { background-color: var(--color-bg-secondary); }
        .border-color { border-color: var(--color-border); }
        .bg-process-flow { background-color: var(--color-process-flow-bg); }
        .text-arrow { color: var(--color-arrow); }
        .sidebar-link.active {
            background-color: var(--color-border);
            color: var(--color-accent-dark);
            font-weight: 600;
        }
        ul.list-disc li::marker {
            color: var(--color-list-marker);
        }

        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        
        .entity-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .entity-card .attributes {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
            padding-top: 0;
        }
        .entity-card.open .attributes {
            max-height: 500px;
            padding-top: 0.5rem;
            transition: max-height 0.5s ease-in;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 40;
            display: none;
        }
        .sidebar-nav {
            position: fixed;
            top: 0;
            left: -256px;
            width: 256px;
            height: 100%;
            background-color: var(--color-bg-secondary);
            z-index: 50;
            transition: left 0.3s ease-in-out;
            box-shadow: 2px 0 5px rgba(0,0,0,0.2);
        }
        .sidebar-nav.open {
            left: 0;
        }
        @media (min-width: 768px) {
            .sidebar-overlay {
                display: none !important;
            }
            .sidebar-nav {
                position: relative;
                left: 0;
                width: 256px;
                box-shadow: none;
                height: auto;
                min-height: 100%;
            }
        }

        .light-mode-er-diagram {
            display: block;
        }
        .dark-mode-er-diagram {
            display: none;
        }
        html.dark .light-mode-er-diagram {
            display: none;
        }
        html.dark .dark-mode-er-diagram {
            display: block;
        }
    </style>
</head>
<body class="bg-primary text-primary min-h-screen flex flex-col">

    <header class="md:hidden bg-secondary border-b border-color p-4 flex items-center justify-between z-30 relative">
        <h1 class="text-xl font-bold accent-dark">DBMS Project</h1>
        <div class="flex items-center space-x-4">
            <button id="themeToggleMobile" class="text-secondary focus:outline-none">
                ‚òÄÔ∏è / üåô
            </button>
            <button id="menuButton" class="text-secondary focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </div>
    </header>

    <div class="flex flex-1">
        <div id="sidebarOverlay" class="sidebar-overlay"></div>

        <aside id="sidebar" class="sidebar-nav md:static md:w-64 flex flex-col flex-shrink-0">
            <div class="p-4 border-b border-color flex flex-col items-center">
                <h1 class="text-xl font-bold accent-dark">DBMS Project</h1>
                <p class="text-sm text-tertiary mb-2">E-Commerce Management System</p>
                <button id="themeToggleDesktop" class="w-full flex items-center justify-center px-4 py-2 rounded-lg text-secondary bg-process-flow hover:bg-border transition-colors text-sm font-medium focus:outline-none">
                    ‚òÄÔ∏è Light Mode
                </button>
            </div>
            <nav class="flex-1 p-4 space-y-2">
                <a href="#overview" class="sidebar-link flex items-center px-4 py-2 rounded-lg hover:bg-process-flow transition-colors" data-target="overview">
                    <span class="mr-3">üè†</span> Overview
                </a>
                <a href="#customer" class="sidebar-link flex items-center px-4 py-2 rounded-lg hover:bg-process-flow transition-colors" data-target="customer">
                    <span class="mr-3">üõçÔ∏è</span> Customer & Orders
                </a>
                <a href="#inventory" class="sidebar-link flex items-center px-4 py-2 rounded-lg hover:bg-process-flow transition-colors" data-target="inventory">
                    <span class="mr-3">üè¨</span> Warehouse & Inventory
                </a>
                <a href="#logistics" class="sidebar-link flex items-center px-4 py-2 rounded-lg hover:bg-process-flow transition-colors" data-target="logistics">
                    <span class="mr-3">üöö</span> Logistics & Delivery
                </a>
                <a href="#returns" class="sidebar-link flex items-center px-4 py-2 rounded-lg hover:bg-process-flow transition-colors" data-target="returns">
                    <span class="mr-3">üîÅ</span> Returns & Support
                </a>
            </nav>
            <div class="p-4 border-t border-color">
                <p class="text-xs text-tertiary mt-4 text-center">&copy; 2025 Neel Mandal</p>
            </div>
        </aside>

        <main class="flex-1 p-6 md:p-8 overflow-y-auto">
            
            <section id="overview" class="content-section">
                <h2 class="text-primary text-3xl md:text-4xl font-bold mb-4">System Architecture Overview</h2>
                <p class="text-secondary text-base mb-8">This application provides an interactive guide to the E-Commerce Management System database schema. Use the sidebar to navigate through the core modules of the system. Each section explains the purpose of its tables and visualizes their relationships.</p>

                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 md:gap-6 mb-12">
                    <div class="bg-secondary p-4 sm:p-6 rounded-xl shadow-sm text-center border border-color">
                        <p class="text-3xl sm:text-4xl font-bold accent-main">13</p>
                        <p class="text-tertiary font-medium text-sm sm:text-base">Total Tables</p>
                    </div>
                    <div class="bg-secondary p-4 sm:p-6 rounded-xl shadow-sm text-center border border-color">
                        <p class="text-3xl sm:text-4xl font-bold accent-main">5</p>
                        <p class="text-tertiary font-medium text-sm sm:text-base">Core Modules</p>
                    </div>
                    <div class="bg-secondary p-4 sm:p-6 rounded-xl shadow-sm text-center border border-color">
                        <p class="text-3xl sm:text-4xl font-bold accent-main">19</p>
                        <p class="text-tertiary font-medium text-sm sm:text-base">Key Relationships</p>
                    </div>
                </div>

                <h3 class="text-primary text-2xl md:text-3xl font-bold mb-4">Core Process Flow</h3>
                <p class="text-secondary text-base mb-6">The diagram below illustrates how the major modules interact, from the initial customer order to final delivery and potential returns.</p>
                <div class="bg-secondary p-4 sm:p-6 rounded-xl shadow-sm border border-color">
                    <div class="flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0 md:space-x-4 text-center">
                        <div class="p-3 sm:p-4 bg-process-flow rounded-lg w-full md:w-auto">
                            <h4 class="font-bold text-sm sm:text-base text-primary">üõçÔ∏è Customer & Orders</h4>
                            <p class="text-xs text-secondary">Customer places an order</p>
                        </div>
                        <div class="text-xl md:text-2xl text-arrow font-mono">&rarr;</div>
                        <div class="p-3 sm:p-4 bg-process-flow rounded-lg w-full md:w-auto">
                            <h4 class="font-bold text-sm sm:text-base text-primary">üè¨ Warehouse & Inventory</h4>
                            <p class="text-xs text-secondary">Stock is allocated and packed</p>
                        </div>
                        <div class="text-xl md:text-2xl text-arrow font-mono">&rarr;</div>
                        <div class="p-3 sm:p-4 bg-process-flow rounded-lg w-full md:w-auto">
                            <h4 class="font-bold text-sm sm:text-base text-primary">üöö Logistics & Delivery</h4>
                            <p class="text-xs text-secondary">Order is shipped and delivered</p>
                        </div>
                         <div class="text-xl md:text-2xl text-arrow font-mono">&rarr;</div>
                        <div class="p-3 sm:p-4 bg-process-flow rounded-lg w-full md:w-auto">
                            <h4 class="font-bold text-sm sm:text-base text-primary">üîÅ Returns & Support</h4>
                            <p class="text-xs text-secondary">Post-delivery actions handled</p>
                        </div>
                    </div>
                </div>

                <h3 class="text-primary text-2xl md:text-3xl font-bold mt-12 mb-4">Detailed ER Diagram</h3>
                <p class="text-secondary text-base mb-6">For a comprehensive view of all table relationships across the entire system, refer to the full Entity-Relationship (ER) diagrams below. These images provide a detailed mapping of how all entities are interconnected. The diagrams will automatically switch to match your selected theme (light or dark mode).</p>
                
                <div class="flex flex-col items-center space-y-8 mb-8">
                    <div class="bg-secondary p-4 rounded-xl shadow-sm w-full max-w-4xl border border-color light-mode-er-diagram">
                        <img src="er1.png" alt="ER Diagram 1 (Light Mode)" class="w-full h-auto object-contain rounded-lg shadow-md border border-color">
                    </div>
                    
                    <div class="bg-secondary p-4 rounded-xl shadow-sm w-full max-w-4xl border border-color dark-mode-er-diagram">
                        <img src="er1dark.png" alt="ER Diagram 1 (Dark Mode)" class="w-full h-auto object-contain rounded-lg shadow-md border border-color">
                    </div>
                </div>
                <p class="text-tertiary text-center text-xs mb-8">ER Diagram generated by <a href="https://sqlflow.gudusoft.com/#/" target="_blank" class="accent-main hover:underline">sqlflow.gudusoft.com</a></p>
            </section>

            <section id="customer" class="content-section">
                <h2 class="text-primary text-3xl md:text-4xl font-bold mb-4">üõçÔ∏è Customer & Orders Module</h2>
                <p class="text-secondary text-base mb-8">This module manages all customer accounts, orders placed, products in the catalog, and associated payment transactions. It forms the core of the e-commerce front end.</p>

                <h3 class="text-primary text-2xl md:text-3xl font-bold mb-4">Entities in this Module</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                    <div class="entity-card bg-secondary p-5 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg accent-dark mb-2">Addresses</h4>
                        <p class="text-sm text-secondary">Centralized storage for all unique address information.</p>
                        <div class="attributes mt-3 text-primary text-sm">
                            <ul class="list-disc pl-5 space-y-1">
                                <li>address_id (PK)</li>
                                <li>address_line1</li>
                                <li>address_line2 (nullable)</li>
                                <li>city</li>
                                <li>state</li>
                                <li>zip_code</li>
                                <li>country</li>
                                <li>created_at</li>
                                <li>updated_at</li>
                            </ul>
                        </div>
                    </div>
                    <div class="entity-card bg-secondary p-5 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg accent-dark mb-2">Customer</h4>
                        <p class="text-sm text-secondary">Stores customer personal and contact information.</p>
                        <div class="attributes mt-3 text-primary text-sm">
                            <ul class="list-disc pl-5 space-y-1">
                                <li>customer_id (PK)</li>
                                <li>first_name</li>
                                <li>last_name</li>
                                <li>email (Unique)</li>
                                <li>phone_number</li>
                                <li>address_id (FK)</li>
                                <li>created_at</li>
                                <li>updated_at</li>
                            </ul>
                        </div>
                    </div>
                    <div class="entity-card bg-secondary p-5 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg accent-dark mb-2">Order</h4>
                        <p class="text-sm text-secondary">Records details of each customer order.</p>
                        <div class="attributes mt-3 text-primary text-sm">
                            <ul class="list-disc pl-5 space-y-1">
                                <li>order_id (PK)</li>
                                <li>customer_id (FK)</li>
                                <li>shipping_address_id (FK)</li>
                                <li>order_status (<span class="font-medium">Enum: Pending, Processing, Shipped, Delivered, Cancelled</span>)</li>
                                <li>order_datetime</li>
                                <li>total_amount</li>
                            </ul>
                        </div>
                    </div>
                    <div class="entity-card bg-secondary p-5 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg accent-dark mb-2">Product</h4>
                        <p class="text-sm text-secondary">Defines the characteristics of each sellable item.</p>
                        <div class="attributes mt-3 text-primary text-sm">
                            <ul class="list-disc pl-5 space-y-1">
                                <li>product_id (PK)</li>
                                <li>sku (Unique)</li>
                                <li>name</li>
                                <li>category</li>
                                <li>weight_kg</li>
                                <li>length_cm</li>
                                <li>width_cm</li>
                                <li>height_cm</li>
                                <li>description (nullable)</li>
                                <li>created_at</li>
                                <li>updated_at</li>
                            </ul>
                        </div>
                    </div>
                    <div class="entity-card bg-secondary p-5 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg accent-dark mb-2">OrderItem</h4>
                        <p class="text-sm text-secondary">Represents individual items within an order.</p>
                        <div class="attributes mt-3 text-primary text-sm">
                            <ul class="list-disc pl-5 space-y-1">
                                <li>order_item_id (PK)</li>
                                <li>order_id (FK)</li>
                                <li>product_id (FK)</li>
                                <li>quantity</li>
                                <li>unit_price</li>
                            </ul>
                        </div>
                    </div>
                    <div class="entity-card bg-secondary p-5 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg accent-dark mb-2">Payment</h4>
                        <p class="text-sm text-secondary">Logs payment transactions for orders.</p>
                        <div class="attributes mt-3 text-primary text-sm">
                            <ul class="list-disc pl-5 space-y-1">
                                <li>payment_id (PK)</li>
                                <li>order_id (FK)</li>
                                <li>payment_mode (<span class="font-medium">Enum: Credit Card, UPI, COD, Net Banking</span>)</li>
                                <li>transaction_id (Unique)</li>
                                <li>payment_status (<span class="font-medium">Enum: Completed, Failed, Refunded, Pending</span>)</li>
                                <li>payment_amount</li>
                                <li>payment_datetime</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <h3 class="text-primary text-2xl md:text-3xl font-bold mt-8 mb-4">Relationships in this Module</h3>
                <div class="bg-secondary p-6 rounded-xl shadow-sm border border-color">
                    <ul class="list-disc pl-5 space-y-3 text-primary">
                        <li>
                            <strong>Customer &harr; Addresses (One-to-One/Many):</strong> A Customer has a billing/primary address. The `address_id` in `Customer` links to the `Addresses` table.
                        </li>
                        <li>
                            <strong>Order &harr; Addresses (One-to-One/Many):</strong> An Order has a shipping address. The `shipping_address_id` in `Order` links to the `Addresses` table.
                        </li>
                        <li>
                            <strong>Customer &harr; Order (One-to-Many):</strong> A Customer can place multiple Orders.
                        </li>
                        <li>
                            <strong>Order &harr; OrderItem (One-to-Many):</strong> An Order can contain multiple OrderItems.
                        </li>
                        <li>
                            <strong>Product &harr; OrderItem (One-to-Many):</strong> A Product can appear in many OrderItems.
                        </li>
                        <li>
                            <strong>Order &harr; Payment (One-to-Many):</strong> An Order can have multiple Payment records.
                        </li>
                    </ul>
                </div>
            </section>

            <section id="inventory" class="content-section">
                <h2 class="text-primary text-3xl md:text-4xl font-bold mb-4">üè¨ Warehouse & Inventory Module</h2>
                <p class="text-secondary text-base mb-8">This module handles the physical storage locations and stock levels of products.</p>

                <h3 class="text-primary text-2xl md:text-3xl font-bold mb-4">Entities in this Module</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                    <div class="entity-card bg-secondary p-5 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg accent-dark mb-2">Warehouse</h4>
                        <p class="text-sm text-secondary">Details of each physical warehouse location.</p>
                        <div class="attributes mt-3 text-primary text-sm">
                            <ul class="list-disc pl-5 space-y-1">
                                <li>warehouse_id (PK)</li>
                                <li>name</li>
                                <li>address_id (FK)</li>
                                <li>capacity_sqft</li>
                                <li>contact_phone</li>
                                <li>contact_email</li>
                                <li>created_at</li>
                                <li>updated_at</li>
                            </ul>
                        </div>
                    </div>
                    <div class="entity-card bg-secondary p-5 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg accent-dark mb-2">Inventory</h4>
                        <p class="text-sm text-secondary">Tracks real-time stock levels of products at each warehouse.</p>
                        <div class="attributes mt-3 text-primary text-sm">
                            <ul class="list-disc pl-5 space-y-1">
                                <li>warehouse_id (PK, FK)</li>
                                <li>product_id (PK, FK)</li>
                                <li>quantity_on_hand</li>
                                <li>min_stock_level</li>
                                <li>max_stock_level</li>
                                <li>last_updated</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <h3 class="text-primary text-2xl md:text-3xl font-bold mt-8 mb-4">Relationships in this Module</h3>
                <div class="bg-secondary p-6 rounded-xl shadow-sm border border-color">
                    <ul class="list-disc pl-5 space-y-3 text-primary">
                        <li>
                            <strong>Warehouse &harr; Addresses (One-to-One):</strong> A Warehouse has one primary address. The `address_id` in `Warehouse` links to the `Addresses` table.
                        </li>
                        <li>
                            <strong>Warehouse &harr; Inventory (One-to-Many):</strong> A Warehouse holds Inventory for many different Products.
                        </li>
                        <li>
                            <strong>Product &harr; Inventory (One-to-Many):</strong> A Product's Inventory levels are tracked across various Warehouse locations.
                        </li>
                    </ul>
                </div>
            </section>

            <section id="logistics" class="content-section">
                <h2 class="text-primary text-3xl md:text-4xl font-bold mb-4">üöö Logistics & Delivery Module</h2>
                <p class="text-secondary text-base mb-8">This module orchestrates the delivery process, from assigning agents to managing shipments and individual packages.</p>

                <h3 class="text-primary text-2xl md:text-3xl font-bold mb-4">Entities in this Module</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                    <div class="entity-card bg-secondary p-5 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg accent-dark mb-2">DeliveryAgent</h4>
                        <p class="text-sm text-secondary">Details of delivery personnel.</p>
                        <div class="attributes mt-3 text-primary text-sm">
                            <ul class="list-disc pl-5 space-y-1">
                                <li>agent_id (PK)</li>
                                <li>first_name</li>
                                <li>last_name</li>
                                <li>contact_phone (Unique)</li>
                                <li>email (Unique)</li>
                                <li>hire_date</li>
                                <li>agent_status (<span class="font-medium">Enum: Active, On Leave, Inactive</span>)</li>
                            </ul>
                        </div>
                    </div>
                    <div class="entity-card bg-secondary p-5 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg accent-dark mb-2">Shipment</h4>
                        <p class="text-sm text-secondary">Represents a single delivery trip carrying one or more packages.</p>
                        <div class="attributes mt-3 text-primary text-sm">
                            <ul class="list-disc pl-5 space-y-1">
                                <li>shipment_id (PK)</li>
                                <li>delivery_agent_id (FK)</li>
                                <li>warehouse_id (FK)</li>
                                <li>shipment_datetime</li>
                                <li>delivery_status (<span class="font-medium">Enum: Out for Delivery, Delivered, Attempted, Failed, Returned</span>)</li>
                                <li>estimated_delivery_datetime</li>
                                <li>actual_delivery_datetime (nullable)</li>
                            </ul>
                        </div>
                    </div>
                    <div class="entity-card bg-secondary p-5 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg accent-dark mb-2">Package</h4>
                        <p class="text-sm text-secondary">Individual physical packages, linked to order items.</p>
                        <div class="attributes mt-3 text-primary text-sm">
                            <ul class="list-disc pl-5 space-y-1">
                                <li>package_id (PK)</li>
                                <li>order_item_id (FK)</li>
                                <li>shipment_id (FK, nullable)</li>
                                <li>tracking_number (Unique)</li>
                                <li>package_status (<span class="font-medium">Enum: Packed, In Transit, Delivered, Damaged, Lost</span>)</li>
                                <li>weight_kg</li>
                                <li>length_cm</li>
                                <li>width_cm</li>
                                <li>height_cm</li>
                                <li>packed_date</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <h3 class="text-primary text-2xl md:text-3xl font-bold mt-8 mb-4">Relationships in this Module</h3>
                <div class="bg-secondary p-6 rounded-xl shadow-sm border border-color">
                    <ul class="list-disc pl-5 space-y-3 text-primary">
                        <li>
                            <strong>DeliveryAgent &harr; Shipment (One-to-Many):</strong> A DeliveryAgent can handle multiple Shipments.
                        </li>
                        <li>
                            <strong>Warehouse &harr; Shipment (One-to-Many):</strong> Each Shipment originates from a specific Warehouse.
                        </li>
                        <li>
                            <strong>OrderItem &harr; Package (One-to-Many):</strong> Each OrderItem is prepared as a unique Package.
                        </li>
                        <li>
                            <strong>Shipment &harr; Package (One-to-Many, optional):</strong> A Shipment bundles multiple Packages.
                        </li>
                    </ul>
                </div>
            </section>

            <section id="returns" class="content-section">
                <h2 class="text-primary text-3xl md:text-4xl font-bold mb-4">üîÅ Returns & Support Module</h2>
                <p class="text-secondary text-base mb-8">This module manages the entire lifecycle of product returns, including requests, pickups, inspections, and refunds.</p>

                <h3 class="text-primary text-2xl md:text-3xl font-bold mb-4">Entities in this Module</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                    <div class="entity-card bg-secondary p-5 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg accent-dark mb-2">ReturnRequest</h4>
                        <p class="text-sm text-secondary">Initial request from a customer to return an item, including pickup and inspection details.</p>
                        <div class="attributes mt-3 text-primary text-sm">
                            <ul class="list-disc pl-5 space-y-1">
                                <li>return_request_id (PK)</li>
                                <li>customer_id (FK)</li>
                                <li>order_item_id (FK)</li>
                                <li>request_date</li>
                                <li>reason (<span class="font-medium">Enum: Damaged, Wrong Size, Not as Described, Changed Mind, Other</span>)</li>
                                <li>return_status (<span class="font-medium">Enum: Pending, Scheduled Pickup, Received, Inspected, Refunded, Rejected, Picked Up, Failed Pickup</span>)</li>
                                <li>pickup_scheduled_date (nullable)</li>
                                <li>pickup_date (nullable)</li>
                                <li>pickup_time_slot (nullable)</li>
                                <li>pickup_address_id (FK, nullable)</li>
                                <li>pickup_agent_id (FK, nullable)</li>
                                <li>inspection_result_enum (<span class="font-medium">Enum: Resellable, Damaged, Defective, Missing Parts, nullable</span>)</li>
                                <li>inspection_notes (Text, nullable)</li>
                                <li>inspector_name (nullable)</li>
                            </ul>
                        </div>
                    </div>
                    <div class="entity-card bg-secondary p-5 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg accent-dark mb-2">Refund</h4>
                        <p class="text-sm text-secondary">Records processed refunds to customers.</p>
                        <div class="attributes mt-3 text-primary text-sm">
                            <ul class="list-disc pl-5 space-y-1">
                                <li>refund_id (PK)</li>
                                <li>return_request_id (FK)</li>
                                <li>payment_id (FK, nullable)</li>
                                <li>refund_amount</li>
                                <li>refund_status (<span class="font-medium">Enum: Pending, Processed, Failed</span>)</li>
                                <li>refund_reason (nullable)</li>
                                <li>refund_datetime</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <h3 class="text-primary text-2xl md:text-3xl font-bold mt-8 mb-4">Relationships in this Module</h3>
                <div class="bg-secondary p-6 rounded-xl shadow-sm border border-color">
                    <ul class="list-disc pl-5 space-y-3 text-primary">
                        <li>
                            <strong>Customer &harr; ReturnRequest (One-to-Many):</strong> A Customer can initiate multiple ReturnRequests.
                        </li>
                        <li>
                            <strong>OrderItem &harr; ReturnRequest (One-to-Many):</strong> A specific OrderItem is linked to a ReturnRequest.
                        </li>
                        <li>
                            <strong>ReturnRequest &harr; Addresses (One-to-One/Many, optional):</strong> A ReturnRequest can have a pickup address.
                        </li>
                        <li>
                            <strong>ReturnRequest &harr; DeliveryAgent (One-to-Many, optional):</strong> A DeliveryAgent can be assigned to a ReturnRequest for pickup.
                        </li>
                        <li>
                            <strong>ReturnRequest &harr; Refund (One-to-One):</strong> An approved ReturnRequest leads to a single Refund.
                        </li>
                        <li>
                            <strong>Payment &harr; Refund (One-to-Many, optional):</strong> A Refund can optionally reference the original Payment transaction.
                        </li>
                    </ul>
                </div>
            </section>

            <section id="dbms_features" class="content-section">
                <h2 class="text-primary text-3xl md:text-4xl font-bold mb-4">Business Logic & Advanced DBMS Features</h2>
                <p class="text-secondary text-base mb-6">Even in a simplified schema, advanced database features can enforce integrity and automate processes:</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-secondary p-4 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg text-primary">‚úÖ Stored Procedures:</h4>
                        <ul class="list-disc pl-5 text-primary space-y-1">
                            <li>**ProcessNewOrder:** Handles the creation of a new order, its items, and initial payment.</li>
                            <li>**UpdateInventory:** Manages stock levels (decrementing on sale, incrementing on return).</li>
                        </ul>
                    </div>
                    <div class="bg-secondary p-4 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg text-primary">üîî Triggers:</h4>
                        <ul class="list-disc pl-5 text-primary space-y-1">
                            <li>**AfterOrderItemInsert:** Automatically reduces `Inventory.quantity_on_hand` for the respective product.</li>
                            <li>**OnReturnRequestStatusChange:** Updates associated `Order.order_status` or triggers `Refund` creation based on return status.</li>
                        </ul>
                    </div>
                    <div class="bg-secondary p-4 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg text-primary">üîç Views:</h4>
                        <ul class="list-disc pl-5 text-primary space-y-1">
                            <li>**CurrentStockLevels:** Provides a simple view of products and their current quantities across warehouses.</li>
                            <li>**ActiveShipments:** Shows all shipments currently in transit.</li>
                        </ul>
                    </div>
                     <div class="bg-secondary p-4 rounded-xl shadow-sm border border-color">
                        <h4 class="font-bold text-lg text-primary">‚ö° Indexes:</h4>
                        <ul class="list-disc pl-5 text-primary space-y-1">
                            <li>On Foreign Key columns (e.g., `customer_id`, `product_id`, `order_id`) for faster join operations.</li>
                            <li>On frequently queried columns (e.g., `email` in `Customer`, `tracking_number` in `Package`) for quick lookups.</li>
                        </ul>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            const contentSections = document.querySelectorAll('.content-section');
            const entityCards = document.querySelectorAll('.entity-card');
            const menuButton = document.getElementById('menuButton');
            const sidebar = document.getElementById('sidebar');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            const themeToggleDesktop = document.getElementById('themeToggleDesktop');
            const themeToggleMobile = document.getElementById('themeToggleMobile');

            function setTheme(isDark) {
                if (isDark) {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('theme', 'dark');
                    if (themeToggleDesktop) themeToggleDesktop.textContent = 'üåô Dark Mode';
                    if (themeToggleMobile) themeToggleMobile.textContent = 'üåô Dark Mode';
                } else {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('theme', 'light');
                    if (themeToggleDesktop) themeToggleDesktop.textContent = '‚òÄÔ∏è Light Mode';
                    if (themeToggleMobile) themeToggleMobile.textContent = '‚òÄÔ∏è Light Mode';
                }
            }

            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                setTheme(true);
            } else {
                setTheme(false);
            }

            if (themeToggleDesktop) {
                themeToggleDesktop.addEventListener('click', () => {
                    setTheme(!document.documentElement.classList.contains('dark'));
                });
            }
            if (themeToggleMobile) {
                themeToggleMobile.addEventListener('click', () => {
                    setTheme(!document.documentElement.classList.contains('dark'));
                });
            }


            function showSection(targetId) {
                contentSections.forEach(section => {
                    if (section) { 
                        section.classList.toggle('active', section.id === targetId);
                    }
                });
                if (sidebarLinks) { 
                    sidebarLinks.forEach(link => {
                        if (link) { 
                            link.classList.toggle('active', link.dataset.target === targetId);
                        }
                    });
                }
                if (window.innerWidth < 768) {
                    if (sidebar) { 
                        sidebar.classList.remove('open');
                    }
                    if (sidebarOverlay) { 
                        sidebarOverlay.style.display = 'none';
                    }
                }
            }

            if (menuButton) {
                menuButton.addEventListener('click', function() {
                    if (sidebar) { 
                        sidebar.classList.toggle('open');
                    }
                    if (sidebarOverlay) { 
                        sidebarOverlay.style.display = sidebar && sidebar.classList.contains('open') ? 'block' : 'none';
                    }
                });
            }

            if (sidebarOverlay) {
                sidebarOverlay.addEventListener('click', function() {
                    if (sidebar) { 
                        sidebar.classList.remove('open');
                    }
                    sidebarOverlay.style.display = 'none';
                });
            }

            if (sidebarLinks) { 
                sidebarLinks.forEach(link => {
                    if (link) { 
                        link.addEventListener('click', function(e) {
                            e.preventDefault();
                            const targetId = this.dataset.target;
                            window.location.hash = targetId;
                            showSection(targetId);
                        });
                    }
                });
            }

            if (entityCards) { 
                entityCards.forEach(card => {
                    if (card) { 
                        card.addEventListener('click', function() {
                            this.classList.toggle('open');
                        });
                    }
                });
            }

            const initialTarget = window.location.hash.substring(1) || 'overview';
            showSection(initialTarget);
            
            // Removed chart-related functions as the Analytics & Comms module is removed.
            // createAgentPerformanceChart();
            // createReturnReasonsChart();

            // Removed chart observation and resize logic.
        });
    </script>
</body>
</html>
